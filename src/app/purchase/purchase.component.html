<div class="heading">PURCHASE</div>
<hr />
<div class="container">
  <div class="row">
    <div class="col">
      <div class="row justify-content-md-left constantForm">
        <div class="col col-lg-2">
          <button
            class="btn btn-primary"
            (click)="addTab('')"
            style="margin-top: 7px"
          >
            ADD TABLE
          </button>
        </div>
        <div class="col col-lg-2">
          <div class="form-floating mb-3">
            <input
              class="form-control"
              type="TEXT"
              id="tableLabel"
              placeholder="TABLE LABEL"
              #tableLabel
              (input)="changeTabName(tableLabel.value)"
            />
            <label for="floatingInput">TABLE LABEL</label>
          </div>
        </div>
        <div class="col col-lg-2">
          <button
            class="btn btn-primary"
            (click)="addTab('PICK UP')"
            style="margin-top: 7px"
          >
            NEW PICK UP
          </button>
        </div>
      </div>
      <div class="row constantForm">
        <form
          [formGroup]="purchaseForm"
          (ngSubmit)="onSubmit()"
          (keydown.enter)="$event.preventDefault()"
          #aForm
        >
          <div class="row justify-content-between">
            <div class="div constantForm">
              <div class="row">
                <div class="col">
                  <div class="input-group input-group-sm mb-3">
                    <div class="input-group mb-3">
                      <mat-form-field style="width: 100%">
                        <input
                          type="text"
                          style="height: 33px"
                          id="item_name"
                          placeholder="ITEM NAME"
                          #itemname
                          (input)="itemName(itemname.value)"
                          formControlName="item_name"
                          matInput
                          [matAutocomplete]="auto"
                        />
                        <mat-autocomplete #auto="matAutocomplete">
                          <mat-option
                            *ngFor="let option of itemOptions"
                            [value]="option.itemName"
                            (onSelectionChange)="
                              onPartySelect(option.rate, $event)
                            "
                          >
                            {{ option.itemName }}
                          </mat-option>
                        </mat-autocomplete>
                      </mat-form-field>
                    </div>
                  </div>
                </div>
                <div class="col">
                  <div class="form-floating mb-3">
                    <input
                      class="form-control"
                      type="number"
                      formControlName="rate"
                      id="Rate"
                    />
                    <label for="floatingInput">Rate</label>
                  </div>
                </div>
                <div class="col">
                  <div class="form-floating mb-3">
                    <input
                      class="form-control"
                      formControlName="quantity"
                      type="number"
                      id="Quantity"
                    />
                    <label for="floatingInput" type="number">Quantity</label>
                  </div>
                </div>
              </div>
              <div class="row" style="width: 6cm; margin-left: 10cm">
                <button
                  type="button"
                  (click)="addNew()"
                  class="btn btn-warning"
                >
                  Add
                </button>
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>
    <div class="col-2 secondCol">
      <div class="row" *ngIf="false">
        <button
          type="button"
          class="btn btn-primary sideButtons"
          [disabled]="!purchaseForm.valid"
        >
          Calculate
        </button>
      </div>
      <div class="row">
        <button
          type="submit"
          (click)="onSubmit()"
          class="btn btn-primary sideButtons"
        >
          Save and Print
        </button>
      </div>
      <div class="row">
        <button
          type="button"
          (click)="resetForm()"
          class="btn btn-primary sideButtons"
        >
          Discard\New
        </button>
      </div>
      <div class="row">
        <button
          type="button"
          (click)="printKot()"
          class="btn btn-primary sideButtons"
        >
          PRINT KOT
        </button>
      </div>
      <div class="row">
        <button
          type="button"
          (click)="removeTab()"
          class="btn btn-primary sideButtons"
        >
          FREE UP TABLE
        </button>
      </div>
      <div class="row" style="margin-top: 3mm" hidden>
        <div class="col">
          <label class="form-label">Total Expense</label>
          <input type="number" #total [value]="amount" class="form-control" />
        </div>
      </div>
    </div>
  </div>
</div>
<div class="container" style="margin-top: 5px">
  <mat-tab-group
    [selectedIndex]="selected.value"
    (selectedIndexChange)="selected.setValue($event)"
    animationDuration="0ms"
  >
    <mat-tab *ngFor="let tab of tabs; let index = index" [label]="tab">
      <table #table class="table table-striped mainTable">
        <thead>
          <tr>
            <th scope="col-1">#</th>
            <th scope="col-1">ITEM</th>
            <th scope="col-1">QUANTITY</th>
            <th scope="col-1">RATE</th>
            <th scope="col-1">TOTAL</th>
            <th scope="col-1">REMOVE</th>
            <th scope="col-1">PRINT KOT</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of arraySqr[selected.value]; index as i">
            <th scope="row">{{ i + 1 }}</th>
            <td>{{ item.item_name }}</td>
            <td>{{ item.quantity }}</td>
            <td>{{ item.rate }}</td>
            <td>{{ item.quantity * item.rate }}</td>
            <td>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                (click)="removeItem(i)"
                width="23"
                height="23"
                fill="currentColor"
                class="bi bi-trash-fill"
                viewBox="0 0 16 16"
              >
                <path
                  d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0z"
                />
              </svg>
            </td>
            <td>
              <input
                class="form-check-input"
                type="checkbox"
                value=""
                id="flexCheckDefault"
                [checked]="kotPrint[selected.value][i]"
                (change)="checkChange(i)"
              />
            </td>
          </tr>
        </tbody>
      </table>
      <div class="row"></div>
    </mat-tab>
  </mat-tab-group>
</div>
<!-- <button
    class="btn btn-primary"
    [disabled]="tabs.length === 1"
    (click)="removeTab(index)"
  >
    Delete Tab
  </button> -->
